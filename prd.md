# T恤图案生成网站产品需求文档 (PRD)

## 1. 项目简介
本项目旨在开发一个基于 AI 的 T恤图案生成网站，用户可以通过输入设计提示词并选择预设风格，生成高质量的 T恤设计图案。系统支持提示词优化、图案生成、实时预览（上身效果）及下载功能。

## 2. 用户流程
1. **输入与选择**：用户输入设计灵感（文字/主体），并从预设风格列表中选择一种风格。
2. **优化提示词**：点击“优化提示词”按钮，系统结合用户输入与风格描述，生成更专业的 AI 绘画提示词。
3. **确认与调整**：用户查看优化后的提示词，可进行二次编辑。
4. **生成配置**：选择图片比例（1:1 或 2:3）。
5. **生成图案**：点击“生成设计图案”，系统调用绘图模型生成图片。
6. **结果交互**：生成的图片显示在界面右侧，用户可选择“下载图片”或“T恤预览”。
7. **T恤预览**：点击预览后，生成的图案将自动叠加在白底 T恤模版上，展示最终效果。

## 3. 功能需求详情

### 3.1 提示词输入与优化模块
- **输入区域**：
  - 文本框：允许用户输入原始设计想法（如“一只戴墨镜的猫”）。
- **风格选择**：
  - 下拉菜单或卡片选择器，数据来源为 `style.md`。
  - **选项包含**：
    1. 极简主义风格 (Minimalism)
    2. 复古怀旧风 (Retro & Vintage)
    3. 街头潮流与机能风 (Streetwear & Techwear)
    4. 手绘插画风 (Hand-drawn & Illustrative)
    5. 纯文字/口号风 (Typography & Slogan)
    6. 塔罗与玄学风 (Tarot & Mystical)
- **优化逻辑**：
  - **触发**：点击“优化提示词”按钮。
  - **处理**：
    - 读取用户输入的提示词。
    - 读取选中风格的 Prompt 模版（来自 `style.md`）。
    - 将两者组合（逻辑参考：`根据风格提示词：【{Selected_Style_Prompt}】，将用户输入的提示词：【{User_Input}】转化成nano banana pro的设计提示词`）。
    - 调用后端接口（基于 `prompt.py` 逻辑）请求 LLM 进行重写。
  - **输出**：将返回的优化后提示词填充到“优化后的提示词”文本域中。
- **可编辑性**：用户可以手动修改优化后的提示词。

### 3.2 图案生成模块
- **参数设置**：
  - **图片比例**：单选按钮或切换开关，选项为 `1:1` 或 `2:3`。
- **生成触发**：
  - 点击“生成设计图案”按钮。
  - **处理**：
    - 获取“优化后的提示词”文本域中的最终内容。
    - 获取选定的图片比例。
    - 调用后端生成接口（基于 `generate.py` 逻辑）。
    - **API 映射参考**：
      - 模型：`gemini-3-pro-image-preview` (Nano Banana 2)
      - 分辨率：默认为 `1K` (可扩展支持 2K/4K)
      - 比例参数映射：`1:1` 或 `3:4` (注意：通常 2:3 接近 3:4 或需确认为 API 支持的比例，此处暂定按 PRD 需求的 2:3 传递，若 API 不支持需回退到最接近比例)。
- **状态反馈**：生成过程中显示 Loading 动画。

### 3.3 结果展示与交互模块
- **展示区域**：
  - 页面右侧显示生成的图片缩略图/大图。
- **操作按钮**：
  - **下载图片**：将生成的 PNG/JPG 图片保存到本地。
  - **预览图片**：
    - 触发模态框或切换视图。
    - **合成逻辑**：前端将生成的图片（去底或带底，根据风格定义，推荐默认带底或提供去底选项）居中叠加在一张白底 T恤模版图片上。
    - 允许用户微调叠加图片的大小和位置（可选高级功能）。

## 4. 技术架构参考

### 4.1 核心脚本引用
- **提示词优化服务**：
  - 参考文件：`/Users/mac/Desktop/tshirt_design/prompt.py`
  - 核心逻辑：使用 `OpenAI` 兼容客户端连接 `https://api.laozhang.ai/v1`，模型 `gemini-3-flash-preview`。
  
- **图像生成服务**：
  - 参考文件：`/Users/mac/Desktop/tshirt_design/generate.py`
  - 核心逻辑：POST 请求 `https://api.laozhang.ai/v1beta/models/gemini-3-pro-image-preview:generateContent`。
  - 鉴权：Bearer Token。

### 4.2 数据源
- **风格配置**：
  - 需解析 `/Users/mac/Desktop/tshirt_design/style.md` 提取风格名称和对应的 Base Prompt。

## 5. 界面布局草图 (UI Sketch)

```
+---------------------------------------------------------------+
|  Header: AI T-Shirt Designer                                  |
+---------------------------+-----------------------------------+
| [ 输入区域 ]              |  [ 结果展示区域 ]                 |
|                           |                                   |
| 1. 输入提示词:            |                                   |
| [ 比如: 一只滑板狗...   ] |   +---------------------------+   |
|                           |   |                           |   |
| 2. 选择风格:              |   |      (生成图片占位)       |   |
| [ 3. 街头潮流机能风 v ]   |   |                           |   |
|                           |   |                           |   |
| [ 优化提示词 (Button) ]   |   +---------------------------+   |
|                           |                                   |
| ------------------------- |   [ 下载图片 ]  [ T恤上身预览 ]   |
|                           |                                   |
| 3. 优化结果 (可编辑):     |                                   |
| [ 自动填充优化后的Prompt ]|                                   |
| [ ...                   ] |                                   |
|                           |                                   |
| 4. 图片比例:              |                                   |
| (o) 1:1   ( ) 2:3         |                                   |
|                           |                                   |
| [ 生成设计图案 (Button) ] |                                   |
|                           |                                   |
+---------------------------+-----------------------------------+
```

## 6. 后续开发计划
1. 搭建前端页面 (React/Vue)。
2. 封装 Python 脚本为 API 服务 (FastAPI/Flask)。
3. 集成 T恤模版合成逻辑。
